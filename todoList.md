# gym-booking-system ç¾ä»£åŒ–æ”¹é€ è—åœ–

æœ¬æ–‡ä»¶æ—¨åœ¨è¿½è¹¤å°‡ç³»çµ±å¾Œç«¯å¾ Google Sheets é·ç§»è‡³ Supabase çš„æ‰€æœ‰å¾…è¾¦äº‹é …ã€‚

## æ ¸å¿ƒç†å¿µ

- **è®€å–æ“ä½œ (Read)**: ç›¡å¯èƒ½è®“å‰ç«¯ (HTML) ç›´æ¥å‘ Supabase è«‹æ±‚è³‡æ–™ï¼Œä»¥ç²å¾—æœ€ä½³æ•ˆèƒ½ã€‚é€é RLS (Row Level Security) ç¢ºä¿è³‡æ–™å®‰å…¨ã€‚
- **å¯«å…¥æ“ä½œ (Write)**: æ‰€æœ‰æ¶‰åŠè³‡æ–™æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤çš„æ•æ„Ÿæ“ä½œï¼Œä¿ç•™åœ¨å¾Œç«¯ Google Apps Script (`Code.gs`) ä¸­è™•ç†ï¼Œä»¥ç¢ºä¿äº¤æ˜“çš„åŸå­æ€§å’Œå®‰å…¨æ€§ã€‚

---

## âœ… å·²å®Œæˆ (Phase 1 & 2)

### Phase 1: è®€å–æ“ä½œé©å‘½

- [x] **è³‡æ–™åº«èˆ‡åŸºç¤å»ºè¨­**
  - [x] å®Œæˆè³‡æ–™åº«é·ç§» (Google Sheets -> Supabase)ã€‚
  - [x] ç‚ºä½¿ç”¨è€…ç«¯é é¢ (`courses`, `schedule`) è¨­å®š RLS å®‰å…¨è¦å‰‡ã€‚
  - [x] å»ºç«‹ `classes_with_details` View ä»¥ç°¡åŒ–èª²è¡¨æŸ¥è©¢ã€‚
  - [x] å»ºç«‹ `search_bookings` RPC å‡½å¼ä»¥å„ªåŒ–é ç´„æŸ¥è©¢ã€‚
- [x] **ä½¿ç”¨è€…ç«¯ (å‰ç«¯ç›´é€£ Supabase)**
  - [x] `courses.html` (èª²ç¨‹åˆ—è¡¨)
  - [x] `schedule.html` (èª²è¡¨é )
- [x] **ç®¡ç†å¾Œå° (å‰ç«¯ç›´é€£ Supabase)**
  - [x] `manager.html` - é ç´„ç®¡ç† (è®€å–)
  - [x] `manager.html` - èª²è¡¨ç®¡ç† (è®€å–)
  - [x] `manager.html` - èª²ç¨‹å‹éŒ„ (è®€å–)
  - [x] `manager.html` - å®¢æˆ¶ç®¡ç† (è®€å–)
  - [x] `manager.html` - æ•™ç·´ç®¡ç† (è®€å–)

### Phase 2: æ ¸å¿ƒå¯«å…¥æ“ä½œé·ç§»

- [x] **ä½¿ç”¨è€…ç«¯ - å»ºç«‹é ç´„ (`createBooking`)**
  - [x] å»ºç«‹ `create_booking_atomic` RPC å‡½å¼ï¼Œç¢ºä¿é ç´„çš„åŸå­æ€§ã€‚
  - [x] æ”¹é€  `Code.gs` ä¸­çš„ `createBooking`ï¼Œä½¿å…¶å‘¼å« RPC å‡½å¼ã€‚
- [x] **ç®¡ç†å¾Œå° - é ç´„ç®¡ç† (å¯«å…¥)**
  - [x] å»ºç«‹ `review_booking_atomic` RPC å‡½å¼ï¼Œè™•ç†æ‰£æ¬¾èˆ‡å–æ¶ˆæ“ä½œã€‚
  - [x] æ”¹é€  `reviewBooking` å‡½å¼ï¼Œä½¿å…¶å‘¼å« RPC å‡½å¼ã€‚

---

## â³ å¾…è¾¦äº‹é … (Phase 3: å¾Œå°å¯«å…¥æ“ä½œå®Œå–„)

### ğŸš€ ä¸‹ä¸€éšæ®µç›®æ¨™

### ğŸ’» ç®¡ç†å¾Œå° (`manager.html`)

- [ ] **èª²è¡¨ç®¡ç†**:
  - [ ] æ”¹é€  `saveClass` å’Œ `deleteClass` (å¯«å…¥)ã€‚
- [ ] **èª²ç¨‹å‹éŒ„ç®¡ç†**:
  - [ ] æ”¹é€  `saveCourse` å’Œ `deleteCourse` (å¯«å…¥)ã€‚
- [ ] **å®¢æˆ¶ç®¡ç†**:
  - [ ] æ”¹é€  `updateUserPoints` (å¯«å…¥)ã€‚
- [ ] **æ•™ç·´ç®¡ç†**:
  - [ ] æ”¹é€  `saveCoach` å’Œ `deleteCoach` (å¯«å…¥)ã€‚